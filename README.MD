# üìå API de Informes de Rendimento

API desenvolvida em **Spring Boot** para gerenciar declara√ß√µes de imposto de renda, utilizando **Flyway** para controle de migra√ß√µes e **MySQL** rodando em um cont√™iner Docker.

---

## üöÄ Tecnologias Utilizadas

- **Java 17**
- **Spring Boot 3**
- **Spring Data JPA**
- **Flyway** (Gerenciamento de migra√ß√µes)
- **MySQL** (Banco de dados)
- **Docker** (Para subir o MySQL)
- **Swagger UI** (Documenta√ß√£o da API)

---

## üèóÔ∏è Arquitetura da Aplica√ß√£o

```plaintext
           +--------------------+
           |    Cliente/API     |
           +--------------------+
                    |
                    v
           +--------------------+
           |    Spring Boot     |
           +--------------------+
                    |
                    v
    +--------------------------------+
    | Banco de Dados (MySQL + Flyway) |
    +--------------------------------+
```

A aplica√ß√£o segue uma arquitetura baseada em **REST APIs**, onde as requisi√ß√µes dos clientes s√£o processadas pelo **Spring Boot**, que interage com o **MySQL** atrav√©s do **Spring Data JPA** e mant√©m as migra√ß√µes de banco organizadas com o **Flyway**.

---

## üõ†Ô∏è Como Configurar e Rodar o Projeto

### **1Ô∏è‚É£ Clonar o reposit√≥rio**

```sh
 git clone <URL_DO_REPOSITORIO>
 cd <NOME_DO_PROJETO>
```

### **2Ô∏è‚É£ Subir o banco de dados MySQL com Docker**

Caso ainda n√£o tenha o MySQL rodando localmente, utilize o Docker para subir um cont√™iner:

```sh
docker-compose up -d
```

Se n√£o houver um `docker-compose.yml`, crie um arquivo e adicione:

```yaml
version: '3.8'
services:
  mysql:
    image: mysql:8.0
    container_name: mysql-container
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: informe_rendimento
      MYSQL_USER: user
      MYSQL_PASSWORD: password
    ports:
      - "3306:3306"
```

### **3Ô∏è‚É£ Configurar o application.properties**

Verifique se o arquivo `src/main/resources/application.properties` cont√©m as configura√ß√µes corretas:

```properties
spring.datasource.url=jdbc:mysql://localhost:3306/informe_rendimento?createDatabaseIfNotExist=true&serverTimezone=UTC
spring.datasource.username=user
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Configura√ß√£o do Flyway
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
```

### **4Ô∏è‚É£ Rodar a aplica√ß√£o**

Se estiver usando **Maven**, rode o seguinte comando:

```sh
mvn spring-boot:run
```

Ou, se preferir, execute diretamente a classe `DemoApplication.java` dentro da IDE.

---

## üìñ Documenta√ß√£o da API

A API possui uma interface Swagger para facilitar o uso:

üîó Acesse: [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)

![Swagger UI](docs/swagger-ui.png)

---

## üóÑÔ∏è Flyway - Controle de Vers√£o do Banco

O **Flyway** √© respons√°vel pela cria√ß√£o e atualiza√ß√£o do banco de dados via scripts de migra√ß√£o. Os scripts devem ser adicionados em:

```
src/main/resources/db/migration/
```

Exemplo de um script de migra√ß√£o:

```sql
-- V1__create_table_rendimentos.sql
CREATE TABLE rendimentos (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    descricao VARCHAR(255) NOT NULL,
    valor DECIMAL(10,2) NOT NULL,
    data DATE NOT NULL
);
```

Para rodar as migra√ß√µes manualmente:

```sh
mvn flyway:migrate
```

---

## ‚úÖ Contribui√ß√£o

Sinta-se √† vontade para contribuir com melhorias e corre√ß√µes. Para isso:

1. **Crie um fork** do reposit√≥rio
2. **Crie uma branch** para sua feature: `git checkout -b minha-feature`
3. **Fa√ßa commit** das suas altera√ß√µes: `git commit -m 'Adicionando nova feature'`
4. **Fa√ßa push** para a branch: `git push origin minha-feature`
5. **Abra um Pull Request** üöÄ

---

## üìú Licen√ßa

Este projeto est√° sob a licen√ßa **MIT** - sinta-se livre para us√°-lo e modific√°-lo! üòâ

